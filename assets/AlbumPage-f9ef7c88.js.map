{"version":3,"file":"AlbumPage-f9ef7c88.js","sources":["../../src/pages/AlbumPage.jsx"],"sourcesContent":["import { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom'; // Import useNavigate\nimport { motion } from 'framer-motion';\nimport { FaPlay, FaInfoCircle } from 'react-icons/fa';\n\n// Components\nimport GlitchText from '../components/GlitchText';\nimport ParallaxBackground from '../components/ParallaxBackground';\nimport AudioPlayer from '../components/AudioPlayer';\n\n// Data\nimport albumData from '../data/albums.json';\n\nconst AlbumPage = () => {\n  const [selectedTrack, setSelectedTrack] = useState(null);\n  const [shouldAutoPlay, setShouldAutoPlay] = useState(false); // State for triggering autoplay\n  const navigate = useNavigate(); // Initialize useNavigate hook\n\n  const handleTrackSelect = (track, autoPlay = false) => { // Add autoPlay parameter\n    setSelectedTrack(track);\n    setShouldAutoPlay(autoPlay); // Set autoplay based on button click\n  };\n  \n  const handleTrackEnd = () => {\n    // Find the next track\n    const currentIndex = albumData.album.tracks.findIndex(track => track.id === selectedTrack.id);\n    if (currentIndex < albumData.album.tracks.length - 1) {\n      setSelectedTrack(albumData.album.tracks[currentIndex + 1]);\n    } else {\n      setSelectedTrack(null);\n    }\n  };\n  \n  // Animation variants\n  const pageVariants = {\n    initial: { opacity: 0 },\n    animate: { \n      opacity: 1,\n      transition: { duration: 0.5, ease: \"easeOut\" }\n    },\n    exit: { \n      opacity: 0,\n      transition: { duration: 0.5, ease: \"easeIn\" }\n    }\n  };\n  \n  const staggerContainer = {\n    animate: {\n      transition: {\n        staggerChildren: 0.1\n      }\n    }\n  };\n  \n  const fadeInUp = {\n    initial: { opacity: 0, y: 30 },\n    animate: { \n      opacity: 1, \n      y: 0,\n      transition: { duration: 0.5, ease: \"easeOut\" }\n    }\n  };\n  \n  return (\n    <ParallaxBackground className=\"pt-24 pb-16\"> {/* Removed min-h-screen */}\n      <motion.div\n        className=\"container-custom mx-auto\"\n        initial=\"initial\"\n        animate=\"animate\"\n        exit=\"exit\"\n        variants={pageVariants}\n      >\n        {/* Page Header */}\n        <motion.div variants={fadeInUp} className=\"mb-16 text-center\">\n          <h1 className=\"text-4xl md:text-5xl lg:text-6xl font-blender mb-6\">\n            <GlitchText text=\"Dystopia 2025\" intensity=\"low\" interactive={true} />\n          </h1>\n          {/* Applied Pretendard font, italic style, and break-keep, removed period */}\n          <p className=\"text-xl text-gray-300 max-w-3xl mx-auto font-pretendard italic break-keep\"> \n            음악적 실험성과 메시지 사이의 균형을 잃지 않은 흔치 않은 수작\n          </p>\n        </motion.div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-12 mb-16\">\n          {/* Album Cover and Info */}\n          <div className=\"lg:col-span-1\">\n            <motion.div \n              className=\"sticky top-24\"\n              initial={{ opacity: 0, scale: 0.95 }}\n              animate={{ opacity: 1, scale: 1 }}\n              transition={{ duration: 0.6 }}\n            >\n              <div className=\"aspect-square relative overflow-hidden rounded-lg shadow-xl mb-6\">\n                <img \n                  src=\"/images/hero.jpg\" \n                  alt=\"Dystopia 2025 Album Cover\" \n                  className=\"w-full h-full object-cover\"\n                />\n                <div className=\"absolute inset-0 bg-gradient-to-t from-primary-dark to-transparent opacity-60\"></div>\n              </div>\n              {/* Missing closing div for motion.div was here */}\n              \n              <div className=\"mb-6\">\n                {/* Temporarily replace GlitchText with plain text */}\n                <h1 className=\"text-3xl mb-2 text-white\"> {/* Ensure text color is visible */}\n                  {albumData.album.title} \n                </h1>\n                <p className=\"text-xl text-gray-300\">{albumData.album.artist}</p>\n                <p className=\"text-accent-blue mt-2\"> {/* Use blue */}\n                  {new Date(albumData.album.releaseDate).toLocaleDateString('ko-KR', {\n                    year: 'numeric',\n                    month: 'long',\n                    day: 'numeric' \n                  })}\n                </p>\n              </div>\n              \n              {selectedTrack && (\n                <div className=\"mb-6\">\n                  {/* Pass shouldAutoPlay and reset it after initial render */}\n                  <AudioPlayer \n                    key={selectedTrack.id} // Keep key for re-mounting player on track change\n                    track={selectedTrack} \n                    onEnded={handleTrackEnd} \n                    autoPlay={shouldAutoPlay} \n                    onAutoPlayComplete={() => setShouldAutoPlay(false)} // Callback to reset autoplay trigger\n                  />\n                </div>\n              )}\n              \n              <div className=\"bg-primary bg-opacity-30 backdrop-blur-sm p-4 rounded-lg\">\n                <h3 className=\"text-lg font-blender mb-4 text-white\">크레딧</h3>\n                {albumData.album.credits.map((credit, index) => (\n                  <div key={index} className=\"mb-2 last:mb-0\">\n                    <span className=\"text-gray-500\">{credit.role}:</span>{' '}\n                    {credit.url ? (\n                      <a \n                        href={credit.url} \n                        target=\"_blank\" \n                        rel=\"noopener noreferrer\" \n                        className=\"text-gray-300 hover:text-accent-magenta transition-colors\" // Removed underline, changed hover color\n                      >\n                        {credit.name}\n                      </a>\n                    ) : (\n                      <span className=\"text-gray-300\">{credit.name}</span>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </motion.div>\n          </div>\n          \n          {/* Album Description and Tracks */}\n          <div className=\"lg:col-span-2\">\n            <motion.div\n              variants={staggerContainer}\n              initial=\"initial\"\n              animate=\"animate\"\n            >\n              <motion.div variants={fadeInUp} className=\"mb-12\">\n                <h2 className=\"text-2xl font-blender mb-6 text-accent-blue\">\n                  <GlitchText text=\"앨범 소개\" intensity=\"low\" interactive={true} />\n                </h2> {/* Use blue */}\n                {albumData.album.description.split('\\n\\n').map((paragraph, index) => (\n                  <p key={index} className={`mb-4 ${index === 2 ? 'text-accent-magenta font-medium text-lg' : 'text-gray-300'}`}> {/* Use magenta */}\n                    {paragraph}\n                  </p>\n                ))}\n              </motion.div>\n              \n              <motion.div variants={fadeInUp}>\n                <h2 className=\"text-2xl font-blender mb-6 text-accent-blue\">\n                  <GlitchText text=\"트랙리스트\" intensity=\"low\" interactive={true} />\n                </h2> {/* Use blue */}\n                <div className=\"space-y-4\">\n                  {albumData.album.tracks.map((track, index) => (\n                    // Wrap the entire track item with Link\n                    <Link \n                      key={track.id} \n                      to={`/album/track/${track.id}`} \n                      className=\"block\" // Make Link a block element\n                    >\n                      <motion.div \n                        className={`bg-primary-dark bg-opacity-50 backdrop-blur-sm rounded-lg overflow-hidden transition-all duration-300 ease-in-out border border-transparent hover:border-accent-blue/50 hover:shadow-neon-blue ${ /* Reverted to blue neon */\n                          selectedTrack?.id === track.id ? 'border-l-4 border-accent-magenta shadow-neon-magenta/40' : 'border-l-4 border-transparent' /* Reverted selected border to magenta */\n                        } overflow-hidden`} // Added overflow-hidden\n                      whileHover={{ scale: 1.01 }}\n                    >\n                      <div className=\"p-4 md:p-5 flex flex-col md:flex-row md:items-center\">\n                        <div className=\"flex items-center mb-3 md:mb-0\">\n                          <div className=\"w-8 h-8 flex items-center justify-center mr-4\">\n                            {selectedTrack?.id === track.id ? (\n                              <div className=\"w-3 h-3 bg-accent-magenta rounded-full animate-pulse\"></div> /* Use magenta */\n                            ) : (\n                              <span className=\"text-accent-blue font-mono\">{(index + 1).toString().padStart(2, '0')}</span> /* Use blue */\n                            )}\n                          </div>\n                          <div className=\"flex-1 overflow-hidden\"> {/* Added overflow-hidden */}\n                            <h3 className=\"text-lg font-blender text-white\">{track.title}</h3>\n                            <p className=\"text-gray-400 text-sm\">{track.duration}</p>\n                          </div>\n                        </div>\n                        \n                        <div className=\"flex items-center ml-12 md:ml-auto space-x-3\">\n                          {/* Play button - stop propagation to prevent link navigation */}\n                          <button \n                            onClick={(e) => {\n                              e.preventDefault(); // Prevent Link navigation\n                              e.stopPropagation(); // Stop event bubbling\n                              handleTrackSelect(track, true); \n                            }} \n                            className=\"w-10 h-10 rounded-full bg-accent-magenta/20 hover:bg-accent-magenta/40 flex items-center justify-center transition-colors z-10 relative\" /* Add z-index */\n                            aria-label={`Play ${track.title}`}\n                          >\n                            <FaPlay className=\"text-accent-magenta\" /> {/* Use magenta */}\n                          </button>\n                          \n                          {/* Info icon (no longer a Link) - stop propagation */}\n                          <div \n                            className=\"w-10 h-10 rounded-full bg-accent-blue/20 flex items-center justify-center transition-colors z-10 relative\" /* Add z-index */\n                            aria-label={`View details for ${track.title}`}\n                            onClick={(e) => {\n                              e.preventDefault(); // Prevent Link navigation\n                              e.stopPropagation(); // Stop event bubbling\n                              navigate(`/album/track/${track.id}`); // Navigate to track detail page\n                            }}\n                          >\n                            <FaInfoCircle className=\"text-accent-blue\" /> {/* Use blue */}\n                          </div>\n                        </div>\n                      </div>\n                      \n                    </motion.div>\n                  </Link>\n                  ))}\n                </div>\n              </motion.div>\n            </motion.div>\n          </div>\n        </div>\n      </motion.div>\n    </ParallaxBackground>\n  );\n};\n\nexport default AlbumPage;\n"],"names":["AlbumPage","selectedTrack","setSelectedTrack","useState","shouldAutoPlay","setShouldAutoPlay","navigate","useNavigate","fadeInUp","initial","opacity","y","animate","transition","duration","ease","jsxs","ParallaxBackground","className","children","jsxRuntimeExports","motion","div","exit","variants","jsx","GlitchText","text","intensity","interactive","scale","src","alt","albumData","album","title","artist","Date","releaseDate","toLocaleDateString","year","month","day","AudioPlayer","track","onEnded","currentIndex","tracks","findIndex","id","length","autoPlay","onAutoPlayComplete","credits","map","credit","index","role","url","href","target","rel","name","staggerChildren","description","split","paragraph","Link","to","whileHover","toString","padStart","onClick","e","preventDefault","stopPropagation","handleTrackSelect","FaPlay","FaInfoCircle"],"mappings":"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"}